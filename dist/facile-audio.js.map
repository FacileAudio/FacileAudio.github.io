{"version":3,"sources":["webpack:///facile-audio.js","webpack:///webpack/bootstrap 6a0b56d4bb59dc4e160e","webpack:///./src/main.js","webpack:///./~/events/events.js","webpack:///./~/worker-loader/createInlineWorker.js","webpack:///./src/modules/abuffer.js","webpack:///./src/modules/receiver.js","webpack:///./src/modules/transmitter.js","webpack:///./src/modules/receiver.worker.js","webpack:///./src/modules/transmitter.worker.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","global","facile","Tx","Rx","this","EventEmitter","_events","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","prototype","defaultMaxListeners","setMaxListeners","n","isNaN","TypeError","emit","type","er","handler","len","args","i","listeners","error","length","arguments","Error","err","context","Array","slice","apply","addListener","listener","newListener","push","warned","console","trace","on","once","g","removeListener","fired","list","position","splice","removeAllListeners","key","ret","listenerCount","evlistener","emitter","URL","window","webkitURL","content","url","blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","e","Blob","Worker","createObjectURL","encodeURIComponent","_classCallCheck","instance","Constructor","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","protoProps","staticProps","audioBuffer","size","bufLen","space","data","Float32Array","free","used","rpos","wpos","overruns","underruns","value","samples","read","left","set","subarray","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_typeof","Symbol","iterator","obj","AudioBuffer","Receiver","_EventEmitter","channel","options","_this","getPrototypeOf","audioCtx","procNode","worker","nsamples","buffer","started","events","bufferMax","bufferMin","server","_init","setup","AudioContext","webkitAudioContext","_this2","Promise","reject","createScriptProcessor","onaudioprocess","_audioProcess","connect","destination","_startWorker","outputBuffer","getChannelData","right","k","_this3","res","rej","onmessage","write","onerror","postMessage","sampleRate","channels","disconnect","terminate","_this4","stop","forEach","ev","q2b","q","Transmitter","mediaStream","srcNode","muteNode","initialized","quality","frameSize","navigator","mediaDevices","getUserMedia","audio","video","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","stream","_capture","then","createMediaStreamSource","channelCount","inputBuffer","j","_initAudio","createGain","gain","ctl","req","val","msg","getTracks","_this5"],"mappings":"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","file":"facile-audio.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {'use strict';\n\t\n\tglobal.facile = {\n\t  Tx: __webpack_require__(5),\n\t  Rx: __webpack_require__(4)\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\tfunction EventEmitter() {\n\t  this._events = this._events || {};\n\t  this._maxListeners = this._maxListeners || undefined;\n\t}\n\tmodule.exports = EventEmitter;\n\t\n\t// Backwards-compat with node 0.10.x\n\tEventEmitter.EventEmitter = EventEmitter;\n\t\n\tEventEmitter.prototype._events = undefined;\n\tEventEmitter.prototype._maxListeners = undefined;\n\t\n\t// By default EventEmitters will print a warning if more than 10 listeners are\n\t// added to it. This is a useful default which helps finding memory leaks.\n\tEventEmitter.defaultMaxListeners = 10;\n\t\n\t// Obviously not all Emitters should be limited to 10. This function allows\n\t// that to be increased. Set to zero for unlimited.\n\tEventEmitter.prototype.setMaxListeners = function(n) {\n\t  if (!isNumber(n) || n < 0 || isNaN(n))\n\t    throw TypeError('n must be a positive number');\n\t  this._maxListeners = n;\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.emit = function(type) {\n\t  var er, handler, len, args, i, listeners;\n\t\n\t  if (!this._events)\n\t    this._events = {};\n\t\n\t  // If there is no 'error' event listener then throw.\n\t  if (type === 'error') {\n\t    if (!this._events.error ||\n\t        (isObject(this._events.error) && !this._events.error.length)) {\n\t      er = arguments[1];\n\t      if (er instanceof Error) {\n\t        throw er; // Unhandled 'error' event\n\t      } else {\n\t        // At least give some kind of context to the user\n\t        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n\t        err.context = er;\n\t        throw err;\n\t      }\n\t    }\n\t  }\n\t\n\t  handler = this._events[type];\n\t\n\t  if (isUndefined(handler))\n\t    return false;\n\t\n\t  if (isFunction(handler)) {\n\t    switch (arguments.length) {\n\t      // fast cases\n\t      case 1:\n\t        handler.call(this);\n\t        break;\n\t      case 2:\n\t        handler.call(this, arguments[1]);\n\t        break;\n\t      case 3:\n\t        handler.call(this, arguments[1], arguments[2]);\n\t        break;\n\t      // slower\n\t      default:\n\t        args = Array.prototype.slice.call(arguments, 1);\n\t        handler.apply(this, args);\n\t    }\n\t  } else if (isObject(handler)) {\n\t    args = Array.prototype.slice.call(arguments, 1);\n\t    listeners = handler.slice();\n\t    len = listeners.length;\n\t    for (i = 0; i < len; i++)\n\t      listeners[i].apply(this, args);\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\tEventEmitter.prototype.addListener = function(type, listener) {\n\t  var m;\n\t\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  if (!this._events)\n\t    this._events = {};\n\t\n\t  // To avoid recursion in the case that type === \"newListener\"! Before\n\t  // adding it to the listeners, first emit \"newListener\".\n\t  if (this._events.newListener)\n\t    this.emit('newListener', type,\n\t              isFunction(listener.listener) ?\n\t              listener.listener : listener);\n\t\n\t  if (!this._events[type])\n\t    // Optimize the case of one listener. Don't need the extra array object.\n\t    this._events[type] = listener;\n\t  else if (isObject(this._events[type]))\n\t    // If we've already got an array, just append.\n\t    this._events[type].push(listener);\n\t  else\n\t    // Adding the second element, need to change to array.\n\t    this._events[type] = [this._events[type], listener];\n\t\n\t  // Check for listener leak\n\t  if (isObject(this._events[type]) && !this._events[type].warned) {\n\t    if (!isUndefined(this._maxListeners)) {\n\t      m = this._maxListeners;\n\t    } else {\n\t      m = EventEmitter.defaultMaxListeners;\n\t    }\n\t\n\t    if (m && m > 0 && this._events[type].length > m) {\n\t      this._events[type].warned = true;\n\t      console.error('(node) warning: possible EventEmitter memory ' +\n\t                    'leak detected. %d listeners added. ' +\n\t                    'Use emitter.setMaxListeners() to increase limit.',\n\t                    this._events[type].length);\n\t      if (typeof console.trace === 'function') {\n\t        // not supported in IE 10\n\t        console.trace();\n\t      }\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\t\n\tEventEmitter.prototype.once = function(type, listener) {\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  var fired = false;\n\t\n\t  function g() {\n\t    this.removeListener(type, g);\n\t\n\t    if (!fired) {\n\t      fired = true;\n\t      listener.apply(this, arguments);\n\t    }\n\t  }\n\t\n\t  g.listener = listener;\n\t  this.on(type, g);\n\t\n\t  return this;\n\t};\n\t\n\t// emits a 'removeListener' event iff the listener was removed\n\tEventEmitter.prototype.removeListener = function(type, listener) {\n\t  var list, position, length, i;\n\t\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  if (!this._events || !this._events[type])\n\t    return this;\n\t\n\t  list = this._events[type];\n\t  length = list.length;\n\t  position = -1;\n\t\n\t  if (list === listener ||\n\t      (isFunction(list.listener) && list.listener === listener)) {\n\t    delete this._events[type];\n\t    if (this._events.removeListener)\n\t      this.emit('removeListener', type, listener);\n\t\n\t  } else if (isObject(list)) {\n\t    for (i = length; i-- > 0;) {\n\t      if (list[i] === listener ||\n\t          (list[i].listener && list[i].listener === listener)) {\n\t        position = i;\n\t        break;\n\t      }\n\t    }\n\t\n\t    if (position < 0)\n\t      return this;\n\t\n\t    if (list.length === 1) {\n\t      list.length = 0;\n\t      delete this._events[type];\n\t    } else {\n\t      list.splice(position, 1);\n\t    }\n\t\n\t    if (this._events.removeListener)\n\t      this.emit('removeListener', type, listener);\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.removeAllListeners = function(type) {\n\t  var key, listeners;\n\t\n\t  if (!this._events)\n\t    return this;\n\t\n\t  // not listening for removeListener, no need to emit\n\t  if (!this._events.removeListener) {\n\t    if (arguments.length === 0)\n\t      this._events = {};\n\t    else if (this._events[type])\n\t      delete this._events[type];\n\t    return this;\n\t  }\n\t\n\t  // emit removeListener for all listeners on all events\n\t  if (arguments.length === 0) {\n\t    for (key in this._events) {\n\t      if (key === 'removeListener') continue;\n\t      this.removeAllListeners(key);\n\t    }\n\t    this.removeAllListeners('removeListener');\n\t    this._events = {};\n\t    return this;\n\t  }\n\t\n\t  listeners = this._events[type];\n\t\n\t  if (isFunction(listeners)) {\n\t    this.removeListener(type, listeners);\n\t  } else if (listeners) {\n\t    // LIFO order\n\t    while (listeners.length)\n\t      this.removeListener(type, listeners[listeners.length - 1]);\n\t  }\n\t  delete this._events[type];\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.listeners = function(type) {\n\t  var ret;\n\t  if (!this._events || !this._events[type])\n\t    ret = [];\n\t  else if (isFunction(this._events[type]))\n\t    ret = [this._events[type]];\n\t  else\n\t    ret = this._events[type].slice();\n\t  return ret;\n\t};\n\t\n\tEventEmitter.prototype.listenerCount = function(type) {\n\t  if (this._events) {\n\t    var evlistener = this._events[type];\n\t\n\t    if (isFunction(evlistener))\n\t      return 1;\n\t    else if (evlistener)\n\t      return evlistener.length;\n\t  }\n\t  return 0;\n\t};\n\t\n\tEventEmitter.listenerCount = function(emitter, type) {\n\t  return emitter.listenerCount(type);\n\t};\n\t\n\tfunction isFunction(arg) {\n\t  return typeof arg === 'function';\n\t}\n\t\n\tfunction isNumber(arg) {\n\t  return typeof arg === 'number';\n\t}\n\t\n\tfunction isObject(arg) {\n\t  return typeof arg === 'object' && arg !== null;\n\t}\n\t\n\tfunction isUndefined(arg) {\n\t  return arg === void 0;\n\t}\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string\r\n\t\r\n\tvar URL = window.URL || window.webkitURL;\r\n\tmodule.exports = function(content, url) {\r\n\t\ttry {\r\n\t\t\ttry {\r\n\t\t\t\tvar blob;\r\n\t\t\t\ttry { // BlobBuilder = Deprecated, but widely implemented\r\n\t\t\t\t\tvar BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\r\n\t\t\t\t\tblob = new BlobBuilder();\r\n\t\t\t\t\tblob.append(content);\r\n\t\t\t\t\tblob = blob.getBlob();\r\n\t\t\t\t} catch(e) { // The proposed API\r\n\t\t\t\t\tblob = new Blob([content]);\r\n\t\t\t\t}\r\n\t\t\t\treturn new Worker(URL.createObjectURL(blob));\r\n\t\t\t} catch(e) {\r\n\t\t\t\treturn new Worker('data:application/javascript,' + encodeURIComponent(content));\r\n\t\t\t}\r\n\t\t} catch(e) {\r\n\t\t\treturn new Worker(url);\r\n\t\t}\r\n\t}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar audioBuffer = function () {\n\t  function audioBuffer(size, bufLen) {\n\t    _classCallCheck(this, audioBuffer);\n\t\n\t    this.space = size;\n\t    this.data = new Float32Array(this.space);\n\t    this.free = this.space;\n\t    this.used = 0;\n\t    this.rpos = 0;\n\t    this.wpos = 0;\n\t    this.overruns = 0;\n\t    this.underruns = 0;\n\t    this.bufLen = bufLen;\n\t  }\n\t\n\t  _createClass(audioBuffer, [{\n\t    key: 'write',\n\t    value: function write(samples) {\n\t      if (this.free < samples.length) {\n\t        ++this.overruns;\n\t\n\t        this.read(samples.length - this.free);\n\t      }\n\t      var left = this.space - this.wpos;\n\t      if (left >= samples.length) {\n\t        this.data.set(samples, this.wpos);\n\t        this.wpos += samples.length;\n\t      } else {\n\t        this.data.set(samples.subarray(0, left), this.wpos);\n\t        this.data.set(samples.subarray(left));\n\t        this.wpos = samples.length - left;\n\t      }\n\t      this.free -= samples.length;\n\t      this.used += samples.length;\n\t      return 0;\n\t    }\n\t  }, {\n\t    key: 'read',\n\t    value: function read(n) {\n\t      if (this.used < this.bufLen) {\n\t        ++this.underruns;\n\t\n\t        return null;\n\t      }\n\t      var data = new Float32Array(n);\n\t      var left = this.space - this.rpos;\n\t      if (left >= n) {\n\t        data.set(this.data.subarray(this.rpos, this.rpos + n));\n\t        this.rpos += n;\n\t      } else {\n\t        data.set(this.data.subarray(this.rpos));\n\t        data.set(this.data.subarray(0, n - left), left);\n\t        this.rpos = n - left;\n\t      }\n\t      this.free += n;\n\t      this.used -= n;\n\t      return data;\n\t    }\n\t  }]);\n\t\n\t  return audioBuffer;\n\t}();\n\t\n\tmodule.exports = audioBuffer;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar EventEmitter = __webpack_require__(1);\n\tvar AudioBuffer = __webpack_require__(3);\n\t\n\tvar Receiver = function (_EventEmitter) {\n\t  _inherits(Receiver, _EventEmitter);\n\t\n\t  function Receiver(channel, options) {\n\t    _classCallCheck(this, Receiver);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Receiver.__proto__ || Object.getPrototypeOf(Receiver)).call(this));\n\t\n\t    _this.audioCtx = null;\n\t    _this.procNode = null;\n\t    _this.worker = null;\n\t    _this.nsamples = 2048;\n\t    _this.buffer = null;\n\t    _this.started = false;\n\t    _this.events = ['error', 'connect', 'disconnect', 'eot'];\n\t    _this.bufferMax = 48000 * 4;\n\t    _this.bufferMin = _this.nsamples * 4;\n\t    _this.server = 'https://rx.facile.audio/rx';\n\t\n\t    if (typeof channel !== 'string') {\n\t      throw new Error('valid channel id is required');\n\t    } else {\n\t      _this.channel = channel;\n\t    }\n\t    if (options && (typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n\t      _this.server = options.server || _this.server;\n\t    }\n\t    _this._init();\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Receiver, [{\n\t    key: '_init',\n\t    value: function _init(setup) {\n\t      var AudioContext = window.AudioContext || window.webkitAudioContext;\n\t      if (!AudioContext) throw new Error('unsupported');\n\t      this.audioCtx = new AudioContext();\n\t\n\t      this.buffer = new AudioBuffer(this.bufferMax, this.bufferMin);\n\t    }\n\t  }, {\n\t    key: 'start',\n\t    value: function start() {\n\t      var _this2 = this;\n\t\n\t      if (this.started !== false) {\n\t        return Promise.reject(new Error('receiver is already running'));\n\t      }\n\t      this.procNode = this.audioCtx.createScriptProcessor(this.nsamples, 2, 2);\n\t      this.procNode.onaudioprocess = function (e) {\n\t        _this2._audioProcess(e);\n\t      };\n\t      this.procNode.connect(this.audioCtx.destination);\n\t      return this._startWorker();\n\t    }\n\t  }, {\n\t    key: '_audioProcess',\n\t    value: function _audioProcess(e) {\n\t      if (this.worker === null) return;\n\t      var left = e.outputBuffer.getChannelData(0);\n\t      var right = e.outputBuffer.getChannelData(1);\n\t      var samples = this.buffer.read(this.nsamples * 2);\n\t      var i = 0;\n\t      var k = 0;\n\t      if (samples) {\n\t        for (i = 0; i < this.nsamples * 2; i += 2) {\n\t          left[k] = samples[i];\n\t          right[k] = samples[i + 1];\n\t          ++k;\n\t        }\n\t      } else {\n\t        for (i = 0; i < this.nsamples; ++i) {\n\t          left[i] = 0;\n\t          right[i] = 0;\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: '_startWorker',\n\t    value: function _startWorker() {\n\t      var _this3 = this;\n\t\n\t      return new Promise(function (res, rej) {\n\t        var Worker = __webpack_require__(6);\n\t        var worker = new Worker();\n\t        worker.onmessage = function (e) {\n\t          if (e.data instanceof Float32Array) {\n\t            return _this3.buffer.write(e.data);\n\t          }\n\t          if (e.data.type === 'init') {\n\t\n\t            _this3.worker = worker;\n\t            _this3.started = true;\n\t            res();\n\t          } else if (e.data.type === 'eot') {\n\t            _this3.emit('eot');\n\t          } else if (e.data.type === 'connect') {\n\t            _this3.emit('connect');\n\t          } else if (e.data.type === 'disconnect') {\n\t            _this3.emit('disconnect');\n\t          } else if (e.data.type === 'error') {\n\t            _this3.emit('error', e.data.err);\n\t          }\n\t        };\n\t        worker.onerror = function (e) {\n\t          _this3.emit('error', e);\n\t        };\n\t        worker.postMessage({\n\t          setup: {\n\t            sampleRate: _this3.audioCtx.sampleRate,\n\t            nsamples: _this3.nsamples,\n\t            channels: 2,\n\t            server: _this3.server,\n\t            channel: _this3.channel\n\t          }\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'stop',\n\t    value: function stop() {\n\t      if (this.started !== true) return;\n\t      this.procNode.disconnect(this.audioCtx.destination);\n\t      this.procNode.onaudioprocess = null;\n\t      if (this.worker) {\n\t        this.worker.terminate();\n\t        this.worker = null;\n\t      }\n\t      this.started = false;\n\t    }\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      var _this4 = this;\n\t\n\t      this.stop();\n\t      this.events.forEach(function (ev) {\n\t        _this4.removeAllListeners(ev);\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Receiver;\n\t}(EventEmitter);\n\t\n\tmodule.exports = Receiver;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar EventEmitter = __webpack_require__(1);\n\t\n\tfunction q2b(q) {\n\t  if (typeof q !== 'string') return 96000;\n\t  switch (q) {\n\t    case 'worst':\n\t      return 32000;\n\t    case 'low':\n\t      return 64000;\n\t    case 'medium':\n\t      return 96000;\n\t    case 'high':\n\t      return 128000;\n\t    case 'best':\n\t      return 192000;\n\t    default:\n\t      return 96000;\n\t  }\n\t}\n\t\n\tvar Transmitter = function (_EventEmitter) {\n\t  _inherits(Transmitter, _EventEmitter);\n\t\n\t  function Transmitter(options) {\n\t    _classCallCheck(this, Transmitter);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Transmitter.__proto__ || Object.getPrototypeOf(Transmitter)).call(this));\n\t\n\t    _this.audioCtx = null;\n\t    _this.mediaStream = null;\n\t    _this.srcNode = null;\n\t    _this.procNode = null;\n\t    _this.muteNode = null;\n\t    _this.worker = null;\n\t    _this.initialized = false;\n\t    _this.started = false;\n\t    _this.events = ['error', 'connect', 'disconnect'];\n\t    _this.quality = 'medium';\n\t    _this.server = 'https://tx.facile.audio/tx';\n\t\n\t    _this.nsamples = 2048;\n\t    _this.frameSize = 480 * 4;\n\t    if (options && (typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n\t      _this.server = options.server || _this.server;\n\t      _this.quality = options.quality || _this.quality;\n\t    }\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Transmitter, [{\n\t    key: '_capture',\n\t    value: function _capture() {\n\t      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n\t        return navigator.mediaDevices.getUserMedia({\n\t          audio: true,\n\t          video: false\n\t        });\n\t      }\n\t      navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\t      if (!navigator.getUserMedia) {\n\t        return Promise.reject(new Error('unsupported'));\n\t      }\n\t      return new Promise(function (res, rej) {\n\t        navigator.getUserMedia({\n\t          audio: true,\n\t          video: false\n\t        }, function (stream) {\n\t          res(stream);\n\t        }, function (e) {\n\t          rej(e);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: '_initAudio',\n\t    value: function _initAudio() {\n\t      var _this2 = this;\n\t\n\t      var AudioContext = window.AudioContext || window.webkitAudioContext;\n\t      if (!AudioContext) {\n\t        return Promise.reject(new Error('unsupported'));\n\t      }\n\t      this.audioCtx = new AudioContext();\n\t      return this._capture().then(function (stream) {\n\t        _this2.mediaStream = stream;\n\t        _this2.srcNode = _this2.audioCtx.createMediaStreamSource(stream);\n\t        if (_this2.srcNode.channelCount !== 2) {\n\t          throw 'Source: input is not stereo!';\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: '_audioProcess',\n\t    value: function _audioProcess(e) {\n\t      var left = e.inputBuffer.getChannelData(0);\n\t      var right = e.inputBuffer.getChannelData(1);\n\t      var samples = new Float32Array(this.srcNode.channelCount * this.nsamples);\n\t      var i = 0;\n\t      var j = 0;\n\t      for (i = 0; i < this.nsamples; ++i) {\n\t        samples[j++] = left[i];\n\t        samples[j++] = right[i];\n\t      }\n\t      if (this.worker) {\n\t        this.worker.postMessage(samples, [samples.buffer]);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'start',\n\t    value: function start() {\n\t      var _this3 = this;\n\t\n\t      if (this.started !== false) {\n\t        return Promise.reject(new Error('receiver is running'));\n\t      }\n\t      return this._initAudio().then(function () {\n\t        _this3.initialized = true;\n\t        _this3.procNode = _this3.audioCtx.createScriptProcessor(_this3.nsamples, _this3.srcNode.channelCount, 2);\n\t        _this3.srcNode.connect(_this3.procNode);\n\t        _this3.procNode.onaudioprocess = function (e) {\n\t          _this3._audioProcess(e);\n\t        };\n\t        _this3.muteNode = _this3.audioCtx.createGain();\n\t        _this3.muteNode.gain.value = 0.0;\n\t        _this3.procNode.connect(_this3.muteNode);\n\t        _this3.muteNode.connect(_this3.audioCtx.destination);\n\t        return _this3._startWorker();\n\t      });\n\t    }\n\t  }, {\n\t    key: '_startWorker',\n\t    value: function _startWorker() {\n\t      var _this4 = this;\n\t\n\t      return new Promise(function (res, rej) {\n\t        var Worker = __webpack_require__(7);\n\t        var worker = new Worker();\n\t        worker.onmessage = function (e) {\n\t          if (e.data.channel) {\n\t\n\t            worker.postMessage({\n\t              ctl: {\n\t                req: 'OPUS_SET_BITRATE',\n\t                val: q2b(_this4.quality)\n\t              }\n\t            });\n\t            _this4.worker = worker;\n\t            _this4.started = true;\n\t            res(e.data.channel);\n\t          } else if (e.data.type === 'connect') {\n\t            _this4.emit('connect');\n\t          } else if (e.data.type === 'disconnect') {\n\t            _this4.emit('disconnect', e.data.msg);\n\t          } else if (e.data.type === 'error') {\n\t            _this4.emit('error', e.data.err);\n\t          }\n\t        };\n\t        worker.onerror = function (e) {\n\t          _this4.emit('error', e);\n\t        };\n\t        worker.postMessage({\n\t          setup: {\n\t            sampleRate: _this4.audioCtx.sampleRate,\n\t            nsamples: _this4.nsamples,\n\t            frameSize: _this4.frameSize,\n\t            channels: _this4.srcNode.channelCount,\n\t            server: _this4.server\n\t          }\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'stop',\n\t    value: function stop() {\n\t      if (this.initialized !== true) return;\n\t      this.srcNode.disconnect(this.procNode);\n\t      this.procNode.disconnect(this.muteNode);\n\t      this.muteNode.disconnect(this.audioCtx.destination);\n\t      this.mediaStream.getTracks()[0].stop();\n\t      this.initialized = false;\n\t      if (this.started !== true) return;\n\t      if (this.worker) {\n\t        this.worker.terminate();\n\t        this.worker = null;\n\t      }\n\t      this.started = false;\n\t    }\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      var _this5 = this;\n\t\n\t      this.stop();\n\t      this.events.forEach(function (ev) {\n\t        _this5.removeAllListeners(ev);\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Transmitter;\n\t}(EventEmitter);\n\t\n\tmodule.exports = Transmitter;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = function() {\n\t\treturn __webpack_require__(2)(\"!function(t){function e(i){if(r[i])return r[i].exports;var s=r[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=t,e.c=r,e.p=\\\"/dist/\\\",e(0)}([function(t,e,r){\\\"use strict\\\";function i(t,e){if(!(t instanceof e))throw new TypeError(\\\"Cannot call a class as a function\\\")}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\\\"value\\\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),n=r(3),o=r(2),a=r(1),u=null,f=function(){function t(){i(this,t),this.decoder=null,this.resampler=null,this.rx=null,this.sampleRate=48e3}return s(t,[{key:\\\"error\\\",value:function(t){postMessage({type:\\\"error\\\",err:\\\"ReceiverWorker: \\\"+t})}},{key:\\\"init\\\",value:function(t){var e=this,r=\\\"https://facile.audio/dist/socket.io-1.4.5.js\\\";n.loadScript(r).then(function(r){importScripts(r),e._initIO(t)}).catch(function(t){postMessage({type:\\\"error\\\",err:t.message})})}},{key:\\\"process\\\",value:function(t){for(var e=null,r=0;r<t.length;++r){try{e=this.decoder.decode(t[r])}catch(t){continue}if(e.length!==this.config.frameSize*this.config.channels){this.error(\\\"Wrong number of samples! \\\"+e.length);break}this.resampler?(this.resampler.initializeBuffers(),e=this.resampler.resample(e,e.length)):e=new Float32Array(e),postMessage(e,[e.buffer])}}},{key:\\\"_initIO\\\",value:function(t){var e=this,r=io(t.server);r.on(\\\"connect\\\",function(){e.rx=r,r.emit(\\\"channel\\\",t.channel),postMessage({type:\\\"connect\\\"})}),r.on(\\\"audio\\\",function(t){e.process(t)}),r.on(\\\"eot\\\",function(){postMessage({type:\\\"eot\\\"})}),r.on(\\\"config\\\",function(r){e.config=r,t.sampleRate!==e.sampleRate&&(e.resampler=new o(e.sampleRate,t.sampleRate,r.channels,Math.ceil(r.frameSize*r.channels*t.sampleRate/e.sampleRate),0));try{e.decoder=new a(e.sampleRate,r.channels,r.frameSize)}catch(t){return e.error(t)}postMessage({type:\\\"init\\\"})}),r.on(\\\"disconnect\\\",function(){postMessage({type:\\\"disconnect\\\"})}),r.on(\\\"err\\\",function(t){postMessage({type:\\\"error\\\",err:t})})}}]),t}();self.onmessage=function(t){if(t.data.setup){if(null!==u)return void u.error(\\\"already initialized\\\");var e=\\\"https://facile.audio/dist/libopus_dec.js\\\";n.loadScript(e).then(function(e){importScripts(e),u=new f,u.init(t.data.setup)}).catch(function(t){postMessage({type:\\\"error\\\",err:t.message})})}else{if(null===u)return void postMessage({type:\\\"error\\\",err:\\\"ReceiverWorker: not initialized\\\"});u.error(\\\"invalid message\\\")}}},function(t,e){\\\"use strict\\\";function r(t,e){if(!(t instanceof e))throw new TypeError(\\\"Cannot call a class as a function\\\")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\\\"value\\\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),s=function(){function t(e,i,s){if(r(this,t),48e3!==e)throw\\\"OpusDec: wrong rate \\\"+e;this.rate=e,this.channels=i,this.frameSize=s,this.ctx=null,this.coded_ptr=null,this.raw_ptr=null;var n=4096,o=16384,a=_malloc(4);this.ctx=_opus_decoder_create(e,i,a);var u=getValue(a,\\\"i32\\\");if(0!==u)throw\\\"OpusDec: opus_decoder_create failed: \\\"+u;_free(a),this.coded_ptr=_malloc(n),this.coded=HEAPU8.subarray(this.coded_ptr,this.coded_ptr+n),this.raw_ptr=_malloc(o),this.raw=HEAPF32.subarray(this.raw_ptr>>2,this.raw_ptr+o>>2)}return i(t,[{key:\\\"decode\\\",value:function(t){this.coded.set(new Uint8Array(t));var e=_opus_decode_float(this.ctx,this.coded_ptr,t.byteLength,this.raw_ptr,this.raw.byteLength,0);if(e<0)throw\\\"OpusDec: opus_decode failed: \\\"+e;var r=this.raw.subarray(0,e*this.channels);return r}},{key:\\\"destroy\\\",value:function(){this.ctx&&(_opus_decoder_destroy(this.ctx),_free(this.coded_ptr),_free(this.raw_ptr),this.ctx=null,this.coded_ptr=null,this.raw_ptr=null)}}]),t}();t.exports=s},function(t,e){\\\"use strict\\\";function r(t,e,r,i,s){this.fromSampleRate=t,this.toSampleRate=e,this.channels=0|r,this.outputBufferSize=i,this.noReturn=!!s,this.initialize()}r.prototype.initialize=function(){if(!(this.fromSampleRate>0&&this.toSampleRate>0&&this.channels>0))throw new Error(\\\"Invalid settings specified for the resampler.\\\");this.fromSampleRate==this.toSampleRate?(this.resample=this.bypassResampler,this.ratioWeight=1):(this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0),this.initializeBuffers())},r.prototype.compileLinearInterpolationFunction=function(){var t=void 0,e=\\\"var bufferLength = Math.min(buffer.length, upTo);\\\\t  var outLength = this.outputBufferSize;\\\\t  if ((bufferLength % \\\"+this.channels+\\\") == 0) {\\\\t    if (bufferLength > 0) {\\\\t      var weight = this.lastWeight;\\\\t      var firstWeight = 0;\\\\t      var secondWeight = 0;\\\\t      var sourceOffset = 0;\\\\t      var outputOffset = 0;\\\\t      var outputBuffer = this.outputBuffer;\\\\t      for (; weight < 1; weight += \\\"+this.ratioWeight+\\\") {\\\\t        secondWeight = weight % 1;\\\\t        firstWeight = 1 - secondWeight;\\\";for(t=0;t<this.channels;++t)e+=\\\"outputBuffer[outputOffset++] = (this.lastOutput[\\\"+t+\\\"] * firstWeight) + (buffer[\\\"+t+\\\"] * secondWeight);\\\";for(e+=\\\"}\\\\t      weight -= 1;\\\\t      for (bufferLength -= \\\"+this.channels+\\\", sourceOffset = Math.floor(weight) * \\\"+this.channels+\\\"; outputOffset < outLength && sourceOffset < bufferLength;) {\\\\t        secondWeight = weight % 1;\\\\t        firstWeight = 1 - secondWeight;\\\",t=0;t<this.channels;++t)e+=\\\"outputBuffer[outputOffset++] = (buffer[sourceOffset\\\"+(t>0?\\\" + \\\"+t:\\\"\\\")+\\\"] * firstWeight) + (buffer[sourceOffset + \\\"+(this.channels+t)+\\\"] * secondWeight);\\\";for(e+=\\\"weight += \\\"+this.ratioWeight+\\\";\\\\t        sourceOffset = Math.floor(weight) * \\\"+this.channels+\\\";\\\\t      }\\\",t=0;t<this.channels;++t)e+=\\\"this.lastOutput[\\\"+t+\\\"] = buffer[sourceOffset++];\\\";e+='this.lastWeight = weight % 1;\\\\t      return this.bufferSlice(outputOffset);\\\\t    }\\\\t    else {\\\\t      return (this.noReturn) ? 0 : [];\\\\t    }\\\\t  }\\\\t  else {\\\\t    throw(new Error(\\\"Buffer was of incorrect sample length.\\\"));\\\\t  }',this.resample=Function(\\\"buffer\\\",\\\"upTo\\\",e)},r.prototype.compileMultiTapFunction=function(){var t=void 0,e=\\\"var bufferLength = Math.min(buffer.length, upTo);\\\\t  var outLength = this.outputBufferSize;\\\\t  if ((bufferLength % \\\"+this.channels+\\\") == 0) {\\\\t    if (bufferLength > 0) {\\\\t      var weight = 0;\\\";for(t=0;t<this.channels;++t)e+=\\\"var output\\\"+t+\\\" = 0;\\\";for(e+=\\\"var actualPosition = 0;\\\\t      var amountToNext = 0;\\\\t      var alreadyProcessedTail = !this.tailExists;\\\\t      this.tailExists = false;\\\\t      var outputBuffer = this.outputBuffer;\\\\t      var outputOffset = 0;\\\\t      var currentPosition = 0;\\\\t      do {\\\\t        if (alreadyProcessedTail) {\\\\t          weight = \\\"+this.ratioWeight+\\\";\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" = 0;\\\";for(e+=\\\"}\\\\t        else {\\\\t          weight = this.lastWeight;\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" = this.lastOutput[\\\"+t+\\\"];\\\";for(e+=\\\"alreadyProcessedTail = true;\\\\t        }\\\\t        while (weight > 0 && actualPosition < bufferLength) {\\\\t          amountToNext = 1 + actualPosition - currentPosition;\\\\t          if (weight >= amountToNext) {\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" += buffer[actualPosition++] * amountToNext;\\\";for(e+=\\\"currentPosition = actualPosition;\\\\t            weight -= amountToNext;\\\\t          }\\\\t          else {\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" += buffer[actualPosition\\\"+(t>0?\\\" + \\\"+t:\\\"\\\")+\\\"] * weight;\\\";for(e+=\\\"currentPosition += weight;\\\\t            weight = 0;\\\\t            break;\\\\t          }\\\\t        }\\\\t        if (weight <= 0) {\\\",t=0;t<this.channels;++t)e+=\\\"outputBuffer[outputOffset++] = output\\\"+t+\\\" / \\\"+this.ratioWeight+\\\";\\\";for(e+=\\\"}\\\\t        else {\\\\t          this.lastWeight = weight;\\\",t=0;t<this.channels;++t)e+=\\\"this.lastOutput[\\\"+t+\\\"] = output\\\"+t+\\\";\\\";e+='this.tailExists = true;\\\\t          break;\\\\t        }\\\\t      } while (actualPosition < bufferLength && outputOffset < outLength);\\\\t      return this.bufferSlice(outputOffset);\\\\t    }\\\\t    else {\\\\t      return (this.noReturn) ? 0 : [];\\\\t    }\\\\t  }\\\\t  else {\\\\t    throw(new Error(\\\"Buffer was of incorrect sample length.\\\"));\\\\t  }',this.resample=Function(\\\"buffer\\\",\\\"upTo\\\",e)},r.prototype.bypassResampler=function(t,e){return this.outputBuffer=t,this.bufferSlice(e)},r.prototype.bufferSlice=function(t){if(this.noReturn)return t;try{return this.outputBuffer.subarray(0,t)}catch(e){try{return this.outputBuffer.length=t,this.outputBuffer}catch(e){return this.outputBuffer.slice(0,t)}}},r.prototype.initializeBuffers=function(){try{this.outputBuffer=new Float32Array(this.outputBufferSize),this.lastOutput=new Float32Array(this.channels)}catch(t){this.outputBuffer=[],this.lastOutput=[]}},t.exports=r},function(t,e){\\\"use strict\\\";function r(t){return new Promise(function(e,r){var i=new XMLHttpRequest;i.open(\\\"GET\\\",t,!0),i.responseType=\\\"blob\\\",i.onload=function(){var t=i.response,r=URL.createObjectURL(t);e(r)},i.onerror=function(t){r(t)},i.send()})}t.exports={loadScript:r}}]);\\n//# sourceMappingURL=0b3b40138ee873633c0e.worker.js.map\", __webpack_require__.p + \"0b3b40138ee873633c0e.worker.js\");\n\t};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = function() {\n\t\treturn __webpack_require__(2)(\"!function(t){function e(i){if(r[i])return r[i].exports;var s=r[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=t,e.c=r,e.p=\\\"/dist/\\\",e(0)}([function(t,e,r){\\\"use strict\\\";function i(t,e){if(!(t instanceof e))throw new TypeError(\\\"Cannot call a class as a function\\\")}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\\\"value\\\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),n=r(3),a=r(2),o=r(1),u=null,h=function(){function t(){i(this,t),this.encoder=null,this.resampler=null,this.tx=null}return s(t,[{key:\\\"init\\\",value:function(t){var e=this;if(isNaN(t.sampleRate))throw\\\"Transmitter Worker: invalid rate \\\"+t.sampleRate;if(2!==t.channels)throw\\\"Transmitter Worker: invalid channel count \\\"+t.channels;if(isNaN(t.nsamples))throw\\\"Transmitter Worker: invalid samples count \\\"+t.nsamples;if(isNaN(t.frameSize))throw\\\"Transmitter Worker: invalid frame size \\\"+t.frameSize;if(\\\"string\\\"!=typeof t.server)throw\\\"Transmitter Worker: invalid server \\\"+t.server;48e3!==t.sampleRate&&(this.resampler=new a(t.sampleRate,48e3,t.channels,Math.ceil(t.nsamples*t.channels*48e3/t.sampleRate),0));try{this.encoder=new o(48e3,t.channels,t.frameSize)}catch(t){this.error(t)}var r=\\\"https://facile.audio/dist/socket.io-1.4.5.js\\\";n.loadScript(r).then(function(r){importScripts(r),e._initIO(t)}).catch(function(t){postMessage({type:\\\"error\\\",err:t.message})})}},{key:\\\"process\\\",value:function(t){var e=null;this.resampler&&(t=this.resampler.resample(t,t.length));try{e=this.encoder.encode(t)}catch(t){return void u.error(t)}this.tx&&this.tx.compress(!1).emit(\\\"audio\\\",e)}},{key:\\\"error\\\",value:function(t){postMessage({type:\\\"error\\\",err:\\\"Transmitter Worker: \\\"+t})}},{key:\\\"_initIO\\\",value:function(t){var e=this,r=io(t.server);r.on(\\\"connect\\\",function(){e.tx=r,postMessage({type:\\\"connect\\\"}),r.emit(\\\"config\\\",{sampleRate:t.sampleRate,frameSize:t.frameSize,channels:t.channels})}),r.on(\\\"channel\\\",function(t){postMessage({channel:t})}),r.on(\\\"disconnect\\\",function(t){postMessage({type:\\\"disconnect\\\"})}),r.on(\\\"err\\\",function(t){postMessage({type:\\\"error\\\",err:t})})}}]),t}();self.onmessage=function(t){if(t.data instanceof Float32Array)null!==u?u.process(t.data):postMessage({type:\\\"error\\\",err:\\\"Transmitter Worker: not initialized\\\"});else if(t.data.setup){if(null!==u)return void u.error(\\\"Transmitter Worker: already initialized\\\");var e=\\\"https://facile.audio/dist/libopus_enc.js\\\";n.loadScript(e).then(function(e){importScripts(e),u=new h,u.init(t.data.setup)}).catch(function(t){postMessage({type:\\\"error\\\",err:t.message})})}else if(t.data.ctl)if(null!==u)try{u.encoder.ctl(t.data.ctl.req,t.data.ctl.val)}catch(t){u.error(t)}else postMessage({type:\\\"error\\\",err:\\\"Transmitter Worker: not initialized\\\"});else{if(null===u)return void postMessage({type:\\\"error\\\",err:\\\"Transmitter Worker: not initialized\\\"});u.error(\\\"Transmitter Worker: invalid message\\\")}}},function(t,e){\\\"use strict\\\";function r(t,e){if(!(t instanceof e))throw new TypeError(\\\"Cannot call a class as a function\\\")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\\\"value\\\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),s=function(){function t(e,i,s){if(r(this,t),48e3!==e)throw\\\"OpusEnc: wrong rate \\\"+e;this.rate=e,this.channels=i,this.frameSize=s;var n=_malloc(4);this.ctx=_opus_encoder_create(this.rate,this.channels,2049,a);var a=getValue(n,\\\"i32\\\");if(0!==a)throw\\\"OpusEnc: opus_encoder_create failed: \\\"+a;_free(n),this.raw_ptr=_malloc(this.frameSize*this.channels*4),this.raw_len=this.frameSize*this.channels,this.raw=HEAPF32.subarray(this.raw_ptr>>2,(this.raw_ptr>>2)+this.raw_len);var o=4096;this.coded_sz=o,this.coded_ptr=_malloc(this.coded_sz),this.coded=HEAPU8.subarray(this.coded_ptr,this.coded_ptr+this.coded_sz),this.raw_off=0}return i(t,[{key:\\\"encode\\\",value:function(t){for(var e=[],r=0;t.length-r>=this.raw_len-this.raw_off;){this.raw_off>0?(this.raw.set(t.subarray(r,r+this.raw_len-this.raw_off),this.raw_off),r+=this.raw_len-this.raw_off,this.raw_off=0):(this.raw.set(t.subarray(r,r+this.raw_len)),r+=this.raw_len);var i=_opus_encode_float(this.ctx,this.raw_ptr,this.frameSize,this.coded_ptr,this.coded_sz);if(i<=0)throw\\\"OpusEnc: opus_encode_float failed: \\\"+i;var s=new ArrayBuffer(i);new Uint8Array(s).set(this.coded.subarray(0,i)),e.push(s)}return r<t.length&&(this.raw.set(t.subarray(r)),this.raw_off=t.length-r),e}},{key:\\\"ctl\\\",value:function(t,e){if(\\\"OPUS_SET_BITRATE\\\"===t){if(isNaN(e))throw\\\"OpusEnc: NaN value \\\"+e;if(e<500||e>512e3)throw\\\"OpusEnc: invalid value \\\"+e;var r=_malloc(4);setValue(r,e,\\\"i32\\\");var i=_opus_encoder_ctl(this.ctx,4002,r);if(i<0)throw\\\"OpusEnc: opus_encoder_ctl failed: \\\"+i;return void _free(r)}throw\\\"OpusEnc: invalid control \\\"+t}},{key:\\\"destroy\\\",value:function(){this.ctx&&(_opus_encoder_destroy(this.ctx),_free(this.raw_ptr),_free(this.coded_ptr),this.ctx=null,this.coded_ptr=null,this.raw_ptr=null)}}]),t}();t.exports=s},function(t,e){\\\"use strict\\\";function r(t,e,r,i,s){this.fromSampleRate=t,this.toSampleRate=e,this.channels=0|r,this.outputBufferSize=i,this.noReturn=!!s,this.initialize()}r.prototype.initialize=function(){if(!(this.fromSampleRate>0&&this.toSampleRate>0&&this.channels>0))throw new Error(\\\"Invalid settings specified for the resampler.\\\");this.fromSampleRate==this.toSampleRate?(this.resample=this.bypassResampler,this.ratioWeight=1):(this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0),this.initializeBuffers())},r.prototype.compileLinearInterpolationFunction=function(){var t=void 0,e=\\\"var bufferLength = Math.min(buffer.length, upTo);\\\\t  var outLength = this.outputBufferSize;\\\\t  if ((bufferLength % \\\"+this.channels+\\\") == 0) {\\\\t    if (bufferLength > 0) {\\\\t      var weight = this.lastWeight;\\\\t      var firstWeight = 0;\\\\t      var secondWeight = 0;\\\\t      var sourceOffset = 0;\\\\t      var outputOffset = 0;\\\\t      var outputBuffer = this.outputBuffer;\\\\t      for (; weight < 1; weight += \\\"+this.ratioWeight+\\\") {\\\\t        secondWeight = weight % 1;\\\\t        firstWeight = 1 - secondWeight;\\\";for(t=0;t<this.channels;++t)e+=\\\"outputBuffer[outputOffset++] = (this.lastOutput[\\\"+t+\\\"] * firstWeight) + (buffer[\\\"+t+\\\"] * secondWeight);\\\";for(e+=\\\"}\\\\t      weight -= 1;\\\\t      for (bufferLength -= \\\"+this.channels+\\\", sourceOffset = Math.floor(weight) * \\\"+this.channels+\\\"; outputOffset < outLength && sourceOffset < bufferLength;) {\\\\t        secondWeight = weight % 1;\\\\t        firstWeight = 1 - secondWeight;\\\",t=0;t<this.channels;++t)e+=\\\"outputBuffer[outputOffset++] = (buffer[sourceOffset\\\"+(t>0?\\\" + \\\"+t:\\\"\\\")+\\\"] * firstWeight) + (buffer[sourceOffset + \\\"+(this.channels+t)+\\\"] * secondWeight);\\\";for(e+=\\\"weight += \\\"+this.ratioWeight+\\\";\\\\t        sourceOffset = Math.floor(weight) * \\\"+this.channels+\\\";\\\\t      }\\\",t=0;t<this.channels;++t)e+=\\\"this.lastOutput[\\\"+t+\\\"] = buffer[sourceOffset++];\\\";e+='this.lastWeight = weight % 1;\\\\t      return this.bufferSlice(outputOffset);\\\\t    }\\\\t    else {\\\\t      return (this.noReturn) ? 0 : [];\\\\t    }\\\\t  }\\\\t  else {\\\\t    throw(new Error(\\\"Buffer was of incorrect sample length.\\\"));\\\\t  }',this.resample=Function(\\\"buffer\\\",\\\"upTo\\\",e)},r.prototype.compileMultiTapFunction=function(){var t=void 0,e=\\\"var bufferLength = Math.min(buffer.length, upTo);\\\\t  var outLength = this.outputBufferSize;\\\\t  if ((bufferLength % \\\"+this.channels+\\\") == 0) {\\\\t    if (bufferLength > 0) {\\\\t      var weight = 0;\\\";for(t=0;t<this.channels;++t)e+=\\\"var output\\\"+t+\\\" = 0;\\\";for(e+=\\\"var actualPosition = 0;\\\\t      var amountToNext = 0;\\\\t      var alreadyProcessedTail = !this.tailExists;\\\\t      this.tailExists = false;\\\\t      var outputBuffer = this.outputBuffer;\\\\t      var outputOffset = 0;\\\\t      var currentPosition = 0;\\\\t      do {\\\\t        if (alreadyProcessedTail) {\\\\t          weight = \\\"+this.ratioWeight+\\\";\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" = 0;\\\";for(e+=\\\"}\\\\t        else {\\\\t          weight = this.lastWeight;\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" = this.lastOutput[\\\"+t+\\\"];\\\";for(e+=\\\"alreadyProcessedTail = true;\\\\t        }\\\\t        while (weight > 0 && actualPosition < bufferLength) {\\\\t          amountToNext = 1 + actualPosition - currentPosition;\\\\t          if (weight >= amountToNext) {\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" += buffer[actualPosition++] * amountToNext;\\\";for(e+=\\\"currentPosition = actualPosition;\\\\t            weight -= amountToNext;\\\\t          }\\\\t          else {\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" += buffer[actualPosition\\\"+(t>0?\\\" + \\\"+t:\\\"\\\")+\\\"] * weight;\\\";for(e+=\\\"currentPosition += weight;\\\\t            weight = 0;\\\\t            break;\\\\t          }\\\\t        }\\\\t        if (weight <= 0) {\\\",t=0;t<this.channels;++t)e+=\\\"outputBuffer[outputOffset++] = output\\\"+t+\\\" / \\\"+this.ratioWeight+\\\";\\\";for(e+=\\\"}\\\\t        else {\\\\t          this.lastWeight = weight;\\\",t=0;t<this.channels;++t)e+=\\\"this.lastOutput[\\\"+t+\\\"] = output\\\"+t+\\\";\\\";e+='this.tailExists = true;\\\\t          break;\\\\t        }\\\\t      } while (actualPosition < bufferLength && outputOffset < outLength);\\\\t      return this.bufferSlice(outputOffset);\\\\t    }\\\\t    else {\\\\t      return (this.noReturn) ? 0 : [];\\\\t    }\\\\t  }\\\\t  else {\\\\t    throw(new Error(\\\"Buffer was of incorrect sample length.\\\"));\\\\t  }',this.resample=Function(\\\"buffer\\\",\\\"upTo\\\",e)},r.prototype.bypassResampler=function(t,e){return this.outputBuffer=t,this.bufferSlice(e)},r.prototype.bufferSlice=function(t){if(this.noReturn)return t;try{return this.outputBuffer.subarray(0,t)}catch(e){try{return this.outputBuffer.length=t,this.outputBuffer}catch(e){return this.outputBuffer.slice(0,t)}}},r.prototype.initializeBuffers=function(){try{this.outputBuffer=new Float32Array(this.outputBufferSize),this.lastOutput=new Float32Array(this.channels)}catch(t){this.outputBuffer=[],this.lastOutput=[]}},t.exports=r},function(t,e){\\\"use strict\\\";function r(t){return new Promise(function(e,r){var i=new XMLHttpRequest;i.open(\\\"GET\\\",t,!0),i.responseType=\\\"blob\\\",i.onload=function(){var t=i.response,r=URL.createObjectURL(t);e(r)},i.onerror=function(t){r(t)},i.send()})}t.exports={loadScript:r}}]);\\n//# sourceMappingURL=1ef88d2c59b5cf36c6fa.worker.js.map\", __webpack_require__.p + \"1ef88d2c59b5cf36c6fa.worker.js\");\n\t};\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// facile-audio.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6a0b56d4bb59dc4e160e","'use strict';\n\nglobal.facile = {\n  Tx: require('./modules/transmitter'),\n  Rx: require('./modules/receiver')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/events/events.js\n// module id = 1\n// module chunks = 0","// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string\r\n\r\nvar URL = window.URL || window.webkitURL;\r\nmodule.exports = function(content, url) {\r\n\ttry {\r\n\t\ttry {\r\n\t\t\tvar blob;\r\n\t\t\ttry { // BlobBuilder = Deprecated, but widely implemented\r\n\t\t\t\tvar BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\r\n\t\t\t\tblob = new BlobBuilder();\r\n\t\t\t\tblob.append(content);\r\n\t\t\t\tblob = blob.getBlob();\r\n\t\t\t} catch(e) { // The proposed API\r\n\t\t\t\tblob = new Blob([content]);\r\n\t\t\t}\r\n\t\t\treturn new Worker(URL.createObjectURL(blob));\r\n\t\t} catch(e) {\r\n\t\t\treturn new Worker('data:application/javascript,' + encodeURIComponent(content));\r\n\t\t}\r\n\t} catch(e) {\r\n\t\treturn new Worker(url);\r\n\t}\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/worker-loader/createInlineWorker.js\n// module id = 2\n// module chunks = 0","'use strict';\n\nclass audioBuffer {\n\n  constructor(size, bufLen) {\n    this.space = size;\n    this.data = new Float32Array(this.space);\n    this.free = this.space;\n    this.used = 0;\n    this.rpos = 0;\n    this.wpos = 0;\n    this.overruns = 0;\n    this.underruns = 0;\n    this.bufLen = bufLen;\n  }\n\n  write(samples) {\n    if (this.free < samples.length) {\n      ++this.overruns;\n\n      this.read(samples.length - this.free);\n    }\n    const left = this.space - this.wpos;\n    if (left >= samples.length) {\n      this.data.set(samples, this.wpos);\n      this.wpos += samples.length;\n    } else {\n      this.data.set(samples.subarray(0, left), this.wpos);\n      this.data.set(samples.subarray(left));\n      this.wpos = samples.length - left;\n    }\n    this.free -= samples.length;\n    this.used += samples.length;\n    return 0;\n  }\n\n  read(n) {\n    if (this.used < this.bufLen) {\n      ++this.underruns;\n\n      return null;\n    }\n    const data = new Float32Array(n);\n    const left = this.space - this.rpos;\n    if (left >= n) {\n      data.set(this.data.subarray(this.rpos, this.rpos + n));\n      this.rpos += n;\n    } else {\n      data.set(this.data.subarray(this.rpos));\n      data.set(this.data.subarray(0, n - left), left);\n      this.rpos = n - left;\n    }\n    this.free += n;\n    this.used -= n;\n    return data;\n  }\n\n}\n\nmodule.exports = audioBuffer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/abuffer.js","'use strict';\n\nconst EventEmitter = require('events');\nconst AudioBuffer = require('./abuffer');\n\nclass Receiver extends EventEmitter {\n\n  constructor(channel, options) {\n    super();\n    this.audioCtx = null;\n    this.procNode = null;\n    this.worker = null;\n    this.nsamples = 2048;\n    this.buffer = null;\n    this.started = false;\n    this.events = ['error', 'connect', 'disconnect', 'eot'];\n    this.bufferMax = 48000 * 4; // 4s\n    this.bufferMin = this.nsamples * 4; // ~170ms\n    this.server = 'https://rx.facile.audio/rx';\n    //this.server = 'http://localhost:8045/rx';\n    if (typeof channel !== 'string') {\n      throw new Error('valid channel id is required');\n    } else {\n      this.channel = channel;\n    }\n    if (options && typeof options === 'object') {\n      this.server = options.server || this.server;\n    }\n    this._init();\n  }\n\n  _init(setup) {\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\n    if (!AudioContext) throw new Error('unsupported');\n    this.audioCtx = new AudioContext();\n\n    this.buffer = new AudioBuffer(this.bufferMax, this.bufferMin);\n  }\n\n  start() {\n    if (this.started !== false) {\n      return Promise.reject(new Error('receiver is already running'));\n    }\n    this.procNode = this.audioCtx.createScriptProcessor(this.nsamples, 2, 2);\n    this.procNode.onaudioprocess = (e) => {\n      this._audioProcess(e);\n    };\n    this.procNode.connect(this.audioCtx.destination);\n    return this._startWorker();\n  }\n\n  _audioProcess(e) {\n    if (this.worker === null) return;\n    const left = e.outputBuffer.getChannelData(0);\n    const right = e.outputBuffer.getChannelData(1);\n    const samples = this.buffer.read(this.nsamples * 2);\n    let i = 0;\n    let k = 0;\n    if (samples) {\n      for (i = 0; i < this.nsamples * 2; i += 2) {\n        left[k] = samples[i];\n        right[k] = samples[i + 1];\n        ++k;\n      }\n    } else {\n      for (i = 0; i < this.nsamples; ++i) {\n        left[i] = 0;\n        right[i] = 0;\n      }\n    }\n  }\n\n  _startWorker() {\n    return new Promise((res, rej) => {\n      const Worker = require('worker?inline!./receiver.worker.js');\n      const worker = new Worker();\n      worker.onmessage = (e) => {\n        if (e.data instanceof Float32Array) {\n          return this.buffer.write(e.data);\n        }\n        if (e.data.type === 'init') {\n\n          this.worker = worker;\n          this.started = true;\n          res();\n        } else if (e.data.type === 'eot') {\n          this.emit('eot');\n        } else if (e.data.type === 'connect') {\n          this.emit('connect');\n        } else if (e.data.type === 'disconnect') {\n          this.emit('disconnect');\n        } else if (e.data.type === 'error') {\n          this.emit('error', e.data.err);\n        }\n      };\n      worker.onerror = (e) => {\n        this.emit('error', e);\n      };\n      worker.postMessage({\n        setup: {\n          sampleRate: this.audioCtx.sampleRate,\n          nsamples: this.nsamples,\n          channels: 2,\n          server: this.server,\n          channel: this.channel\n        }\n      });\n    });\n  }\n\n  stop() {\n    if (this.started !== true) return;\n    this.procNode.disconnect(this.audioCtx.destination);\n    this.procNode.onaudioprocess = null;\n    if (this.worker) {\n      this.worker.terminate();\n      this.worker = null;\n    }\n    this.started = false;\n  }\n\n  destroy() {\n    this.stop();\n    this.events.forEach((ev) => {\n      this.removeAllListeners(ev);\n    });\n  }\n\n}\n\nmodule.exports = Receiver;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/receiver.js","'use strict';\n\nconst EventEmitter = require('events');\n\nfunction q2b(q) {\n  if (typeof q !== 'string') return 96000;\n  switch (q) {\n    case 'worst': return 32000;\n    case 'low': return 64000;\n    case 'medium': return 96000;\n    case 'high': return 128000;\n    case 'best': return 192000;\n    default: return 96000;\n  }\n}\n\nclass Transmitter extends EventEmitter {\n\n  constructor(options) {\n    super();\n    this.audioCtx = null;\n    this.mediaStream = null;\n    this.srcNode = null;\n    this.procNode = null;\n    this.muteNode = null;\n    this.worker = null;\n    this.initialized = false;\n    this.started = false;\n    this.events = ['error', 'connect', 'disconnect'];\n    this.quality = 'medium';\n    this.server = 'https://tx.facile.audio/tx';\n    //this.server = 'http://localhost:8045/tx';\n    this.nsamples = 2048;\n    this.frameSize = 480 * 4; // 40ms\n    if (options && typeof options === 'object') {\n      this.server = options.server || this.server;\n      this.quality = options.quality || this.quality;\n    }\n  }\n\n  _capture() {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      return navigator.mediaDevices.getUserMedia({\n        audio: true,\n        video: false\n      });\n    }\n    navigator.getUserMedia = (navigator.getUserMedia ||\n      navigator.webkitGetUserMedia ||\n      navigator.mozGetUserMedia ||\n      navigator.msGetUserMedia);\n    if (!navigator.getUserMedia) {\n      return Promise.reject(new Error('unsupported'));\n    }\n    return new Promise((res, rej) => {\n      navigator.getUserMedia({\n        audio: true,\n        video: false\n      }, (stream) => {\n        res(stream);\n      }, (e) => {\n        rej(e);\n      });\n    });\n  }\n\n  _initAudio() {\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\n    if (!AudioContext) {\n      return Promise.reject(new Error('unsupported'));\n    }\n    this.audioCtx = new AudioContext();\n    return this._capture().then((stream) => {\n      this.mediaStream = stream;\n      this.srcNode = this.audioCtx.createMediaStreamSource(stream);\n      if (this.srcNode.channelCount !== 2) {\n        throw 'Source: input is not stereo!';\n      }\n    });\n  }\n\n  _audioProcess(e) {\n    const left = e.inputBuffer.getChannelData(0);\n    const right = e.inputBuffer.getChannelData(1);\n    const samples = new Float32Array(this.srcNode.channelCount\n     * this.nsamples);\n    let i = 0;\n    let j = 0;\n    for (i = 0; i < this.nsamples; ++i) {\n      samples[j++] = left[i];\n      samples[j++] = right[i];\n    }\n    if (this.worker) {\n      this.worker.postMessage(samples, [samples.buffer]);\n    }\n  }\n\n  start() {\n    if (this.started !== false) {\n      return Promise.reject(new Error('receiver is running'));\n    }\n    return this._initAudio().then(() => {\n      this.initialized = true;\n      this.procNode = this.audioCtx.createScriptProcessor(this.nsamples,\n       this.srcNode.channelCount, 2);\n      this.srcNode.connect(this.procNode);\n      this.procNode.onaudioprocess = (e) => {\n        this._audioProcess(e);\n      };\n      this.muteNode = this.audioCtx.createGain();\n      this.muteNode.gain.value = 0.0;\n      this.procNode.connect(this.muteNode);\n      this.muteNode.connect(this.audioCtx.destination);\n      return this._startWorker();\n    });\n  }\n\n  _startWorker() {\n    return new Promise((res, rej) => {\n      const Worker = require('worker?inline!./transmitter.worker.js');\n      const worker = new Worker();\n      worker.onmessage = (e) => {\n        if (e.data.channel) {\n\n          worker.postMessage({\n            ctl: {\n              req: 'OPUS_SET_BITRATE',\n              val: q2b(this.quality)\n            }\n          });\n          this.worker = worker;\n          this.started = true;\n          res(e.data.channel);\n        } else if (e.data.type === 'connect') {\n          this.emit('connect');\n        } else if (e.data.type === 'disconnect') {\n          this.emit('disconnect', e.data.msg);\n        } else if (e.data.type === 'error') {\n          this.emit('error', e.data.err);\n        }\n      };\n      worker.onerror = (e) => {\n        this.emit('error', e);\n      };\n      worker.postMessage({\n        setup: {\n          sampleRate: this.audioCtx.sampleRate,\n          nsamples: this.nsamples,\n          frameSize: this.frameSize,\n          channels: this.srcNode.channelCount,\n          server: this.server\n        }\n      });\n    });\n  }\n\n  stop() {\n    if (this.initialized !== true) return;\n    this.srcNode.disconnect(this.procNode);\n    this.procNode.disconnect(this.muteNode);\n    this.muteNode.disconnect(this.audioCtx.destination);\n    this.mediaStream.getTracks()[0].stop();\n    this.initialized = false;\n    if (this.started !== true) return;\n    if (this.worker) {\n      this.worker.terminate();\n      this.worker = null;\n    }\n    this.started = false;\n  }\n\n  destroy() {\n    this.stop();\n    this.events.forEach((ev) => {\n      this.removeAllListeners(ev);\n    });\n  }\n\n}\n\nmodule.exports = Transmitter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/transmitter.js","module.exports = function() {\n\treturn require(\"!!/home/streamer45/code/facile/node_modules/worker-loader/createInlineWorker.js\")(\"!function(t){function e(i){if(r[i])return r[i].exports;var s=r[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=t,e.c=r,e.p=\\\"/dist/\\\",e(0)}([function(t,e,r){\\\"use strict\\\";function i(t,e){if(!(t instanceof e))throw new TypeError(\\\"Cannot call a class as a function\\\")}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\\\"value\\\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),n=r(3),o=r(2),a=r(1),u=null,f=function(){function t(){i(this,t),this.decoder=null,this.resampler=null,this.rx=null,this.sampleRate=48e3}return s(t,[{key:\\\"error\\\",value:function(t){postMessage({type:\\\"error\\\",err:\\\"ReceiverWorker: \\\"+t})}},{key:\\\"init\\\",value:function(t){var e=this,r=\\\"https://facile.audio/dist/socket.io-1.4.5.js\\\";n.loadScript(r).then(function(r){importScripts(r),e._initIO(t)}).catch(function(t){postMessage({type:\\\"error\\\",err:t.message})})}},{key:\\\"process\\\",value:function(t){for(var e=null,r=0;r<t.length;++r){try{e=this.decoder.decode(t[r])}catch(t){continue}if(e.length!==this.config.frameSize*this.config.channels){this.error(\\\"Wrong number of samples! \\\"+e.length);break}this.resampler?(this.resampler.initializeBuffers(),e=this.resampler.resample(e,e.length)):e=new Float32Array(e),postMessage(e,[e.buffer])}}},{key:\\\"_initIO\\\",value:function(t){var e=this,r=io(t.server);r.on(\\\"connect\\\",function(){e.rx=r,r.emit(\\\"channel\\\",t.channel),postMessage({type:\\\"connect\\\"})}),r.on(\\\"audio\\\",function(t){e.process(t)}),r.on(\\\"eot\\\",function(){postMessage({type:\\\"eot\\\"})}),r.on(\\\"config\\\",function(r){e.config=r,t.sampleRate!==e.sampleRate&&(e.resampler=new o(e.sampleRate,t.sampleRate,r.channels,Math.ceil(r.frameSize*r.channels*t.sampleRate/e.sampleRate),0));try{e.decoder=new a(e.sampleRate,r.channels,r.frameSize)}catch(t){return e.error(t)}postMessage({type:\\\"init\\\"})}),r.on(\\\"disconnect\\\",function(){postMessage({type:\\\"disconnect\\\"})}),r.on(\\\"err\\\",function(t){postMessage({type:\\\"error\\\",err:t})})}}]),t}();self.onmessage=function(t){if(t.data.setup){if(null!==u)return void u.error(\\\"already initialized\\\");var e=\\\"https://facile.audio/dist/libopus_dec.js\\\";n.loadScript(e).then(function(e){importScripts(e),u=new f,u.init(t.data.setup)}).catch(function(t){postMessage({type:\\\"error\\\",err:t.message})})}else{if(null===u)return void postMessage({type:\\\"error\\\",err:\\\"ReceiverWorker: not initialized\\\"});u.error(\\\"invalid message\\\")}}},function(t,e){\\\"use strict\\\";function r(t,e){if(!(t instanceof e))throw new TypeError(\\\"Cannot call a class as a function\\\")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\\\"value\\\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),s=function(){function t(e,i,s){if(r(this,t),48e3!==e)throw\\\"OpusDec: wrong rate \\\"+e;this.rate=e,this.channels=i,this.frameSize=s,this.ctx=null,this.coded_ptr=null,this.raw_ptr=null;var n=4096,o=16384,a=_malloc(4);this.ctx=_opus_decoder_create(e,i,a);var u=getValue(a,\\\"i32\\\");if(0!==u)throw\\\"OpusDec: opus_decoder_create failed: \\\"+u;_free(a),this.coded_ptr=_malloc(n),this.coded=HEAPU8.subarray(this.coded_ptr,this.coded_ptr+n),this.raw_ptr=_malloc(o),this.raw=HEAPF32.subarray(this.raw_ptr>>2,this.raw_ptr+o>>2)}return i(t,[{key:\\\"decode\\\",value:function(t){this.coded.set(new Uint8Array(t));var e=_opus_decode_float(this.ctx,this.coded_ptr,t.byteLength,this.raw_ptr,this.raw.byteLength,0);if(e<0)throw\\\"OpusDec: opus_decode failed: \\\"+e;var r=this.raw.subarray(0,e*this.channels);return r}},{key:\\\"destroy\\\",value:function(){this.ctx&&(_opus_decoder_destroy(this.ctx),_free(this.coded_ptr),_free(this.raw_ptr),this.ctx=null,this.coded_ptr=null,this.raw_ptr=null)}}]),t}();t.exports=s},function(t,e){\\\"use strict\\\";function r(t,e,r,i,s){this.fromSampleRate=t,this.toSampleRate=e,this.channels=0|r,this.outputBufferSize=i,this.noReturn=!!s,this.initialize()}r.prototype.initialize=function(){if(!(this.fromSampleRate>0&&this.toSampleRate>0&&this.channels>0))throw new Error(\\\"Invalid settings specified for the resampler.\\\");this.fromSampleRate==this.toSampleRate?(this.resample=this.bypassResampler,this.ratioWeight=1):(this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0),this.initializeBuffers())},r.prototype.compileLinearInterpolationFunction=function(){var t=void 0,e=\\\"var bufferLength = Math.min(buffer.length, upTo);\\\\t  var outLength = this.outputBufferSize;\\\\t  if ((bufferLength % \\\"+this.channels+\\\") == 0) {\\\\t    if (bufferLength > 0) {\\\\t      var weight = this.lastWeight;\\\\t      var firstWeight = 0;\\\\t      var secondWeight = 0;\\\\t      var sourceOffset = 0;\\\\t      var outputOffset = 0;\\\\t      var outputBuffer = this.outputBuffer;\\\\t      for (; weight < 1; weight += \\\"+this.ratioWeight+\\\") {\\\\t        secondWeight = weight % 1;\\\\t        firstWeight = 1 - secondWeight;\\\";for(t=0;t<this.channels;++t)e+=\\\"outputBuffer[outputOffset++] = (this.lastOutput[\\\"+t+\\\"] * firstWeight) + (buffer[\\\"+t+\\\"] * secondWeight);\\\";for(e+=\\\"}\\\\t      weight -= 1;\\\\t      for (bufferLength -= \\\"+this.channels+\\\", sourceOffset = Math.floor(weight) * \\\"+this.channels+\\\"; outputOffset < outLength && sourceOffset < bufferLength;) {\\\\t        secondWeight = weight % 1;\\\\t        firstWeight = 1 - secondWeight;\\\",t=0;t<this.channels;++t)e+=\\\"outputBuffer[outputOffset++] = (buffer[sourceOffset\\\"+(t>0?\\\" + \\\"+t:\\\"\\\")+\\\"] * firstWeight) + (buffer[sourceOffset + \\\"+(this.channels+t)+\\\"] * secondWeight);\\\";for(e+=\\\"weight += \\\"+this.ratioWeight+\\\";\\\\t        sourceOffset = Math.floor(weight) * \\\"+this.channels+\\\";\\\\t      }\\\",t=0;t<this.channels;++t)e+=\\\"this.lastOutput[\\\"+t+\\\"] = buffer[sourceOffset++];\\\";e+='this.lastWeight = weight % 1;\\\\t      return this.bufferSlice(outputOffset);\\\\t    }\\\\t    else {\\\\t      return (this.noReturn) ? 0 : [];\\\\t    }\\\\t  }\\\\t  else {\\\\t    throw(new Error(\\\"Buffer was of incorrect sample length.\\\"));\\\\t  }',this.resample=Function(\\\"buffer\\\",\\\"upTo\\\",e)},r.prototype.compileMultiTapFunction=function(){var t=void 0,e=\\\"var bufferLength = Math.min(buffer.length, upTo);\\\\t  var outLength = this.outputBufferSize;\\\\t  if ((bufferLength % \\\"+this.channels+\\\") == 0) {\\\\t    if (bufferLength > 0) {\\\\t      var weight = 0;\\\";for(t=0;t<this.channels;++t)e+=\\\"var output\\\"+t+\\\" = 0;\\\";for(e+=\\\"var actualPosition = 0;\\\\t      var amountToNext = 0;\\\\t      var alreadyProcessedTail = !this.tailExists;\\\\t      this.tailExists = false;\\\\t      var outputBuffer = this.outputBuffer;\\\\t      var outputOffset = 0;\\\\t      var currentPosition = 0;\\\\t      do {\\\\t        if (alreadyProcessedTail) {\\\\t          weight = \\\"+this.ratioWeight+\\\";\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" = 0;\\\";for(e+=\\\"}\\\\t        else {\\\\t          weight = this.lastWeight;\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" = this.lastOutput[\\\"+t+\\\"];\\\";for(e+=\\\"alreadyProcessedTail = true;\\\\t        }\\\\t        while (weight > 0 && actualPosition < bufferLength) {\\\\t          amountToNext = 1 + actualPosition - currentPosition;\\\\t          if (weight >= amountToNext) {\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" += buffer[actualPosition++] * amountToNext;\\\";for(e+=\\\"currentPosition = actualPosition;\\\\t            weight -= amountToNext;\\\\t          }\\\\t          else {\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" += buffer[actualPosition\\\"+(t>0?\\\" + \\\"+t:\\\"\\\")+\\\"] * weight;\\\";for(e+=\\\"currentPosition += weight;\\\\t            weight = 0;\\\\t            break;\\\\t          }\\\\t        }\\\\t        if (weight <= 0) {\\\",t=0;t<this.channels;++t)e+=\\\"outputBuffer[outputOffset++] = output\\\"+t+\\\" / \\\"+this.ratioWeight+\\\";\\\";for(e+=\\\"}\\\\t        else {\\\\t          this.lastWeight = weight;\\\",t=0;t<this.channels;++t)e+=\\\"this.lastOutput[\\\"+t+\\\"] = output\\\"+t+\\\";\\\";e+='this.tailExists = true;\\\\t          break;\\\\t        }\\\\t      } while (actualPosition < bufferLength && outputOffset < outLength);\\\\t      return this.bufferSlice(outputOffset);\\\\t    }\\\\t    else {\\\\t      return (this.noReturn) ? 0 : [];\\\\t    }\\\\t  }\\\\t  else {\\\\t    throw(new Error(\\\"Buffer was of incorrect sample length.\\\"));\\\\t  }',this.resample=Function(\\\"buffer\\\",\\\"upTo\\\",e)},r.prototype.bypassResampler=function(t,e){return this.outputBuffer=t,this.bufferSlice(e)},r.prototype.bufferSlice=function(t){if(this.noReturn)return t;try{return this.outputBuffer.subarray(0,t)}catch(e){try{return this.outputBuffer.length=t,this.outputBuffer}catch(e){return this.outputBuffer.slice(0,t)}}},r.prototype.initializeBuffers=function(){try{this.outputBuffer=new Float32Array(this.outputBufferSize),this.lastOutput=new Float32Array(this.channels)}catch(t){this.outputBuffer=[],this.lastOutput=[]}},t.exports=r},function(t,e){\\\"use strict\\\";function r(t){return new Promise(function(e,r){var i=new XMLHttpRequest;i.open(\\\"GET\\\",t,!0),i.responseType=\\\"blob\\\",i.onload=function(){var t=i.response,r=URL.createObjectURL(t);e(r)},i.onerror=function(t){r(t)},i.send()})}t.exports={loadScript:r}}]);\\n//# sourceMappingURL=0b3b40138ee873633c0e.worker.js.map\", __webpack_public_path__ + \"0b3b40138ee873633c0e.worker.js\");\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/worker-loader?inline!./src/modules/receiver.worker.js\n// module id = 6\n// module chunks = 0","module.exports = function() {\n\treturn require(\"!!/home/streamer45/code/facile/node_modules/worker-loader/createInlineWorker.js\")(\"!function(t){function e(i){if(r[i])return r[i].exports;var s=r[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=t,e.c=r,e.p=\\\"/dist/\\\",e(0)}([function(t,e,r){\\\"use strict\\\";function i(t,e){if(!(t instanceof e))throw new TypeError(\\\"Cannot call a class as a function\\\")}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\\\"value\\\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),n=r(3),a=r(2),o=r(1),u=null,h=function(){function t(){i(this,t),this.encoder=null,this.resampler=null,this.tx=null}return s(t,[{key:\\\"init\\\",value:function(t){var e=this;if(isNaN(t.sampleRate))throw\\\"Transmitter Worker: invalid rate \\\"+t.sampleRate;if(2!==t.channels)throw\\\"Transmitter Worker: invalid channel count \\\"+t.channels;if(isNaN(t.nsamples))throw\\\"Transmitter Worker: invalid samples count \\\"+t.nsamples;if(isNaN(t.frameSize))throw\\\"Transmitter Worker: invalid frame size \\\"+t.frameSize;if(\\\"string\\\"!=typeof t.server)throw\\\"Transmitter Worker: invalid server \\\"+t.server;48e3!==t.sampleRate&&(this.resampler=new a(t.sampleRate,48e3,t.channels,Math.ceil(t.nsamples*t.channels*48e3/t.sampleRate),0));try{this.encoder=new o(48e3,t.channels,t.frameSize)}catch(t){this.error(t)}var r=\\\"https://facile.audio/dist/socket.io-1.4.5.js\\\";n.loadScript(r).then(function(r){importScripts(r),e._initIO(t)}).catch(function(t){postMessage({type:\\\"error\\\",err:t.message})})}},{key:\\\"process\\\",value:function(t){var e=null;this.resampler&&(t=this.resampler.resample(t,t.length));try{e=this.encoder.encode(t)}catch(t){return void u.error(t)}this.tx&&this.tx.compress(!1).emit(\\\"audio\\\",e)}},{key:\\\"error\\\",value:function(t){postMessage({type:\\\"error\\\",err:\\\"Transmitter Worker: \\\"+t})}},{key:\\\"_initIO\\\",value:function(t){var e=this,r=io(t.server);r.on(\\\"connect\\\",function(){e.tx=r,postMessage({type:\\\"connect\\\"}),r.emit(\\\"config\\\",{sampleRate:t.sampleRate,frameSize:t.frameSize,channels:t.channels})}),r.on(\\\"channel\\\",function(t){postMessage({channel:t})}),r.on(\\\"disconnect\\\",function(t){postMessage({type:\\\"disconnect\\\"})}),r.on(\\\"err\\\",function(t){postMessage({type:\\\"error\\\",err:t})})}}]),t}();self.onmessage=function(t){if(t.data instanceof Float32Array)null!==u?u.process(t.data):postMessage({type:\\\"error\\\",err:\\\"Transmitter Worker: not initialized\\\"});else if(t.data.setup){if(null!==u)return void u.error(\\\"Transmitter Worker: already initialized\\\");var e=\\\"https://facile.audio/dist/libopus_enc.js\\\";n.loadScript(e).then(function(e){importScripts(e),u=new h,u.init(t.data.setup)}).catch(function(t){postMessage({type:\\\"error\\\",err:t.message})})}else if(t.data.ctl)if(null!==u)try{u.encoder.ctl(t.data.ctl.req,t.data.ctl.val)}catch(t){u.error(t)}else postMessage({type:\\\"error\\\",err:\\\"Transmitter Worker: not initialized\\\"});else{if(null===u)return void postMessage({type:\\\"error\\\",err:\\\"Transmitter Worker: not initialized\\\"});u.error(\\\"Transmitter Worker: invalid message\\\")}}},function(t,e){\\\"use strict\\\";function r(t,e){if(!(t instanceof e))throw new TypeError(\\\"Cannot call a class as a function\\\")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\\\"value\\\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),s=function(){function t(e,i,s){if(r(this,t),48e3!==e)throw\\\"OpusEnc: wrong rate \\\"+e;this.rate=e,this.channels=i,this.frameSize=s;var n=_malloc(4);this.ctx=_opus_encoder_create(this.rate,this.channels,2049,a);var a=getValue(n,\\\"i32\\\");if(0!==a)throw\\\"OpusEnc: opus_encoder_create failed: \\\"+a;_free(n),this.raw_ptr=_malloc(this.frameSize*this.channels*4),this.raw_len=this.frameSize*this.channels,this.raw=HEAPF32.subarray(this.raw_ptr>>2,(this.raw_ptr>>2)+this.raw_len);var o=4096;this.coded_sz=o,this.coded_ptr=_malloc(this.coded_sz),this.coded=HEAPU8.subarray(this.coded_ptr,this.coded_ptr+this.coded_sz),this.raw_off=0}return i(t,[{key:\\\"encode\\\",value:function(t){for(var e=[],r=0;t.length-r>=this.raw_len-this.raw_off;){this.raw_off>0?(this.raw.set(t.subarray(r,r+this.raw_len-this.raw_off),this.raw_off),r+=this.raw_len-this.raw_off,this.raw_off=0):(this.raw.set(t.subarray(r,r+this.raw_len)),r+=this.raw_len);var i=_opus_encode_float(this.ctx,this.raw_ptr,this.frameSize,this.coded_ptr,this.coded_sz);if(i<=0)throw\\\"OpusEnc: opus_encode_float failed: \\\"+i;var s=new ArrayBuffer(i);new Uint8Array(s).set(this.coded.subarray(0,i)),e.push(s)}return r<t.length&&(this.raw.set(t.subarray(r)),this.raw_off=t.length-r),e}},{key:\\\"ctl\\\",value:function(t,e){if(\\\"OPUS_SET_BITRATE\\\"===t){if(isNaN(e))throw\\\"OpusEnc: NaN value \\\"+e;if(e<500||e>512e3)throw\\\"OpusEnc: invalid value \\\"+e;var r=_malloc(4);setValue(r,e,\\\"i32\\\");var i=_opus_encoder_ctl(this.ctx,4002,r);if(i<0)throw\\\"OpusEnc: opus_encoder_ctl failed: \\\"+i;return void _free(r)}throw\\\"OpusEnc: invalid control \\\"+t}},{key:\\\"destroy\\\",value:function(){this.ctx&&(_opus_encoder_destroy(this.ctx),_free(this.raw_ptr),_free(this.coded_ptr),this.ctx=null,this.coded_ptr=null,this.raw_ptr=null)}}]),t}();t.exports=s},function(t,e){\\\"use strict\\\";function r(t,e,r,i,s){this.fromSampleRate=t,this.toSampleRate=e,this.channels=0|r,this.outputBufferSize=i,this.noReturn=!!s,this.initialize()}r.prototype.initialize=function(){if(!(this.fromSampleRate>0&&this.toSampleRate>0&&this.channels>0))throw new Error(\\\"Invalid settings specified for the resampler.\\\");this.fromSampleRate==this.toSampleRate?(this.resample=this.bypassResampler,this.ratioWeight=1):(this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0),this.initializeBuffers())},r.prototype.compileLinearInterpolationFunction=function(){var t=void 0,e=\\\"var bufferLength = Math.min(buffer.length, upTo);\\\\t  var outLength = this.outputBufferSize;\\\\t  if ((bufferLength % \\\"+this.channels+\\\") == 0) {\\\\t    if (bufferLength > 0) {\\\\t      var weight = this.lastWeight;\\\\t      var firstWeight = 0;\\\\t      var secondWeight = 0;\\\\t      var sourceOffset = 0;\\\\t      var outputOffset = 0;\\\\t      var outputBuffer = this.outputBuffer;\\\\t      for (; weight < 1; weight += \\\"+this.ratioWeight+\\\") {\\\\t        secondWeight = weight % 1;\\\\t        firstWeight = 1 - secondWeight;\\\";for(t=0;t<this.channels;++t)e+=\\\"outputBuffer[outputOffset++] = (this.lastOutput[\\\"+t+\\\"] * firstWeight) + (buffer[\\\"+t+\\\"] * secondWeight);\\\";for(e+=\\\"}\\\\t      weight -= 1;\\\\t      for (bufferLength -= \\\"+this.channels+\\\", sourceOffset = Math.floor(weight) * \\\"+this.channels+\\\"; outputOffset < outLength && sourceOffset < bufferLength;) {\\\\t        secondWeight = weight % 1;\\\\t        firstWeight = 1 - secondWeight;\\\",t=0;t<this.channels;++t)e+=\\\"outputBuffer[outputOffset++] = (buffer[sourceOffset\\\"+(t>0?\\\" + \\\"+t:\\\"\\\")+\\\"] * firstWeight) + (buffer[sourceOffset + \\\"+(this.channels+t)+\\\"] * secondWeight);\\\";for(e+=\\\"weight += \\\"+this.ratioWeight+\\\";\\\\t        sourceOffset = Math.floor(weight) * \\\"+this.channels+\\\";\\\\t      }\\\",t=0;t<this.channels;++t)e+=\\\"this.lastOutput[\\\"+t+\\\"] = buffer[sourceOffset++];\\\";e+='this.lastWeight = weight % 1;\\\\t      return this.bufferSlice(outputOffset);\\\\t    }\\\\t    else {\\\\t      return (this.noReturn) ? 0 : [];\\\\t    }\\\\t  }\\\\t  else {\\\\t    throw(new Error(\\\"Buffer was of incorrect sample length.\\\"));\\\\t  }',this.resample=Function(\\\"buffer\\\",\\\"upTo\\\",e)},r.prototype.compileMultiTapFunction=function(){var t=void 0,e=\\\"var bufferLength = Math.min(buffer.length, upTo);\\\\t  var outLength = this.outputBufferSize;\\\\t  if ((bufferLength % \\\"+this.channels+\\\") == 0) {\\\\t    if (bufferLength > 0) {\\\\t      var weight = 0;\\\";for(t=0;t<this.channels;++t)e+=\\\"var output\\\"+t+\\\" = 0;\\\";for(e+=\\\"var actualPosition = 0;\\\\t      var amountToNext = 0;\\\\t      var alreadyProcessedTail = !this.tailExists;\\\\t      this.tailExists = false;\\\\t      var outputBuffer = this.outputBuffer;\\\\t      var outputOffset = 0;\\\\t      var currentPosition = 0;\\\\t      do {\\\\t        if (alreadyProcessedTail) {\\\\t          weight = \\\"+this.ratioWeight+\\\";\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" = 0;\\\";for(e+=\\\"}\\\\t        else {\\\\t          weight = this.lastWeight;\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" = this.lastOutput[\\\"+t+\\\"];\\\";for(e+=\\\"alreadyProcessedTail = true;\\\\t        }\\\\t        while (weight > 0 && actualPosition < bufferLength) {\\\\t          amountToNext = 1 + actualPosition - currentPosition;\\\\t          if (weight >= amountToNext) {\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" += buffer[actualPosition++] * amountToNext;\\\";for(e+=\\\"currentPosition = actualPosition;\\\\t            weight -= amountToNext;\\\\t          }\\\\t          else {\\\",t=0;t<this.channels;++t)e+=\\\"output\\\"+t+\\\" += buffer[actualPosition\\\"+(t>0?\\\" + \\\"+t:\\\"\\\")+\\\"] * weight;\\\";for(e+=\\\"currentPosition += weight;\\\\t            weight = 0;\\\\t            break;\\\\t          }\\\\t        }\\\\t        if (weight <= 0) {\\\",t=0;t<this.channels;++t)e+=\\\"outputBuffer[outputOffset++] = output\\\"+t+\\\" / \\\"+this.ratioWeight+\\\";\\\";for(e+=\\\"}\\\\t        else {\\\\t          this.lastWeight = weight;\\\",t=0;t<this.channels;++t)e+=\\\"this.lastOutput[\\\"+t+\\\"] = output\\\"+t+\\\";\\\";e+='this.tailExists = true;\\\\t          break;\\\\t        }\\\\t      } while (actualPosition < bufferLength && outputOffset < outLength);\\\\t      return this.bufferSlice(outputOffset);\\\\t    }\\\\t    else {\\\\t      return (this.noReturn) ? 0 : [];\\\\t    }\\\\t  }\\\\t  else {\\\\t    throw(new Error(\\\"Buffer was of incorrect sample length.\\\"));\\\\t  }',this.resample=Function(\\\"buffer\\\",\\\"upTo\\\",e)},r.prototype.bypassResampler=function(t,e){return this.outputBuffer=t,this.bufferSlice(e)},r.prototype.bufferSlice=function(t){if(this.noReturn)return t;try{return this.outputBuffer.subarray(0,t)}catch(e){try{return this.outputBuffer.length=t,this.outputBuffer}catch(e){return this.outputBuffer.slice(0,t)}}},r.prototype.initializeBuffers=function(){try{this.outputBuffer=new Float32Array(this.outputBufferSize),this.lastOutput=new Float32Array(this.channels)}catch(t){this.outputBuffer=[],this.lastOutput=[]}},t.exports=r},function(t,e){\\\"use strict\\\";function r(t){return new Promise(function(e,r){var i=new XMLHttpRequest;i.open(\\\"GET\\\",t,!0),i.responseType=\\\"blob\\\",i.onload=function(){var t=i.response,r=URL.createObjectURL(t);e(r)},i.onerror=function(t){r(t)},i.send()})}t.exports={loadScript:r}}]);\\n//# sourceMappingURL=1ef88d2c59b5cf36c6fa.worker.js.map\", __webpack_public_path__ + \"1ef88d2c59b5cf36c6fa.worker.js\");\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/worker-loader?inline!./src/modules/transmitter.worker.js\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}